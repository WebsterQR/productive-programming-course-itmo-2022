# Модульный дизайн и принцип DRY (лекция 11)

Что лучше использовать существующий модуль или писать свой:

![image](https://user-images.githubusercontent.com/57497898/213869668-60c6b767-e64d-445c-8280-6669c94dbe56.png)

Можно заметить, что использовать готовое чужое решение во многих случаях - более разумная стратегия (из-за Direct Cost и Future Cost)

#### \**тут было много слов и рассуждений про эту таблицу, но я их скипнул*\*

### Easy to Read vs Easy to Change

Чтобы изменить код, надо сначала прочить его. То есть Easy to Change $\rightarrow$ Easy to Read. Наоборот неверно, например мы работаем с хорошим фреймворком и наш код Easy to Read. Но если мы захотим сделать что-то что не входит в возможности фреймворка, нам будет сложно. Это не Easy to Change.

#### Easy to Change $\rightarrow$ Easy to Read

----

## Принцип DRY

Допустим мы хотим уменьшить количество зависимостей в коде. Может просто заинлайним некоторые функции, чтобы было поменьше вызовов метододов?

Очень жаль, но дублирование кода это плохая практика
- появляется Change Amplification (но это еще не так плохо)
- неявная зависимость часто ведет к Unknown Unknowns
- если разные inline-ы функций немного различаются между собой, то влечет Unknown Unknowns, и могут возникнуть баги

Правда мы можем обезопаситься от второй и третьей проблемы, оставив комментарии около каждой копии с указанием, где лежат остальные

DRY (Dont Repeat Yourself) - каждая знание должно быть уникальным и официальным в системе. Никогда не пишите одно и то же два раза, даже координально разным способом.

Тут важно слово **знание** - речь не про код, а про смысл. Поэтому дублирование кода не обязательно противоречит принципу DRY.

```java
// пример дублирования не противоречащий DRY
verify(quantity != null);
verify(quantity > 0);

verify(price != null);
verify(price > 0);
```

В следующем коде есть дупликаты знания, даже при том что дублирования кода нет. То есть следующий код противоречит принципам DRY.

```java
class Vector {
    Point start;
    Point end;
    double length; // тоже самое, что distance(start, end)
}
```
