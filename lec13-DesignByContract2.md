# Дизайн по контракту часть 2 (лекция 13)

Чтобы проверить контракт выстраиваивается линия защиты из трех проверок:
- типами
- тестами
- runtime assertions

Нужны ли runtime assertions? Допустим их нет. У вас некорректное состояние системы. Так что ошибка не заставит себя долго ждать. <br>
Поэтому вопрос можно сформулировать следующим образом: крашится в начале (около места возникновения бага) или ждать пока он все сломает?

За первый вариант:
- намного более хорошее покрытие, чем то что достигается тестами
- легче найти источник проблемы
- зачастую упавшая программа делает плохого намного меньше, чем программа в некорректном состоянии

Хотим ли мы такие проверки в Production? Да. Пример:

```c++
void transferMoney(int money) {
    user1.bringMoney(money);
    // error
    user2.giveMoney(money)
}
```

Unit тесты проверяют:
- preconditions соблюдены $\rightarrow$ postconditions и инварианты класса соблюдены
- preconditions не соблюдены $\rightarrow$ test failed

Runtime assertions проверяют:
- preconditions соблюдаются 
- [optional] preconditions соблюдены $\rightarrow$ postconditions и инварианты класса соблюдены
- [optional] проверка состояний которые "нельзя" достигнуть

Stub тесты хуже чем full context тесты, так как вы во втором случае дополнительно проверяете контракты других модулей
